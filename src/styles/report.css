/* --- Report Page: Header --- */
.report-hero {
    background: var(--bg-header);
    padding: var(--space-xl) 0;
    margin-top: calc(-1 * var(--nav-height));
    padding-top: calc(var(--nav-height) + var(--space-xl));
}
.report-hero-inner,
.nfi-alert-inner {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--space-lg);
}
.report-back {
    font-size: 0.7rem; font-weight: 500;
    color: var(--text-muted);
    margin-bottom: var(--space-lg);
    display: inline-block;
}
.report-back:hover { color: var(--text-primary); }
/* Report page: prev/next stock navigation bar */
.rh-stock-nav-bar {
    background: var(--bg-card);
    border-bottom: 1px solid var(--border);
}
.rh-stock-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 10px var(--space-lg);
}
.rh-stock-nav a {
    font-family: var(--font-data);
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--accent-teal);
    letter-spacing: 0.04em;
    text-transform: uppercase;
}
.rh-stock-nav a:hover { color: var(--text-primary); }
.rh-main {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    gap: var(--space-xl);
    flex-wrap: wrap;
}
.rh-left { flex: 1; min-width: 280px; }
.rh-type {
    font-size: 0.6rem; font-weight: 600;
    letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--accent-sage);
    margin-bottom: var(--space-xs);
}
.rh-ticker {
    font-size: 2.2rem; font-weight: 800;
    letter-spacing: -0.02em;
    color: var(--text-primary);
    line-height: 1.1;
    margin-bottom: 4px;
}
.rh-company {
    font-size: 1rem; font-weight: 400;
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}
.rh-sector-tag {
    display: inline-block;
    font-size: 0.58rem; font-weight: 600;
    letter-spacing: 0.06em; text-transform: uppercase;
    color: var(--accent-sage);
    background: rgba(74, 158, 126, 0.12);
    padding: 3px 10px;
    border-radius: 3px;
    border: 1px solid rgba(74, 158, 126, 0.2);
}
.rh-company-desc {
    font-family: var(--font-body);
    font-size: 0.92rem;
    color: var(--text-secondary);
    line-height: 1.55;
    max-width: 640px;
    margin-top: var(--space-sm);
}
.rh-right { text-align: right; flex-shrink: 0; }
.rh-price {
    font-family: var(--font-data);
    font-size: 2rem; font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
    margin-bottom: var(--space-sm);
}
.rh-price-currency {
    font-size: 0.9rem; font-weight: 400;
    color: var(--text-muted);
}
.rh-metrics {
    display: flex; gap: var(--space-lg);
    justify-content: flex-end;
}
.rh-metric { text-align: right; }
.rh-metric-label {
    font-size: 0.5rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.06em;
    color: var(--text-muted);
}
.rh-metric-value {
    font-family: var(--font-data);
    font-size: 0.82rem; font-weight: 600;
    color: var(--text-secondary);
}
.rh-metric-value.premium { color: var(--accent-gold); }
.rh-metric-value.negative { color: var(--signal-red); }
.rh-metric-value.positive { color: var(--signal-green); }

/* --- Report Page: Spec Sections (1.2"1.5) --- */
.rh-spec-section {
    background: var(--bg-surface-alt);
    border-bottom: 1px solid var(--border);
}
.rh-spec-block {
    padding: var(--space-md) 0;
    border-top: 1px solid var(--border);
}
.rh-spec-label {
    font-size: 0.55rem;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
    display: inline;
}
.rh-spec-text {
    font-size: 0.88rem;
    line-height: 1.6;
    color: var(--text-secondary);
    margin-top: var(--space-xs);
}

/* 1.2 Embedded Thesis */
.rh-embedded-thesis .rh-spec-text {
    font-family: var(--font-serif);
    color: var(--text-primary);
}

/* 1.3 Position in Range */
.rh-position-range { padding-bottom: var(--space-lg); }
.pir-bar-wrap {
    position: relative;
    margin-top: var(--space-md);
    padding: 25px 0 45px !important; /* Force reduced padding */
}
.pir-bar {
    position: relative;
    height: 12px !important; /* Force compact height */
    background: linear-gradient(to right, var(--signal-red), var(--signal-amber), var(--signal-green));
    border-radius: 6px;
    margin: 0 16px;
}
.pir-world {
    position: absolute;
    transform: translateX(-50%);
    text-align: center;
    top: 14px !important; /* Adjusted for compact bar */
}
.pir-world-tick {
    position: absolute;
    top: -14px !important; /* Adjusted for compact bar */
    left: 50%;
    transform: translateX(-50%);
    width: 1px;
    height: 14px !important;
    background: rgba(138,154,184,0.4);
    margin: 0;
}
.pir-world-price {
    font-family: var(--font-data);
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-secondary);
    white-space: nowrap;
}
.pir-world-label {
    font-size: 0.58rem;
    color: var(--text-muted);
    white-space: nowrap;
    margin-top: 2px;
}
.pir-current {
    position: absolute;
    transform: translateX(-50%);
    top: -24px !important; /* Adjusted for compact bar */
    text-align: center;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
}
.pir-current-dot {
    font-size: 0.7rem;
    color: var(--accent-teal);
    line-height: 1;
}
.pir-current-label {
    font-family: var(--font-data);
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--accent-teal);
    white-space: nowrap;
    margin-bottom: 2px;
}
.pir-note {
    display: none !important; /* Force hide the indicative text */
}

/* 1.4 Valuation Range */
.vr-block { padding-bottom: var(--space-lg); }
.vr-title-row { display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md); }
.vr-badge {
    font-size: 0.55rem; font-weight: 800; letter-spacing: 0.1em; text-transform: uppercase;
    padding: 2px 7px; border-radius: 3px;
}
.vr-badge.amber { background: rgba(212,160,60,0.15); color: var(--signal-amber); }
.vr-badge.neutral { background: rgba(0,0,0,0.08); color: var(--text-muted); }
.vr-badge.positive { background: rgba(61,170,109,0.15); color: var(--signal-green); }
.vr-bar-wrap {
    position: relative;
    margin-top: var(--space-md);
    padding: 25px 0 45px !important; /* Match compact PIR padding */
}
.vr-bar {
    position: relative;
    height: 12px !important; /* Match compact PIR height */
    background: linear-gradient(to right, var(--signal-red) 0%, var(--signal-amber) 40%, var(--signal-green) 100%);
    border-radius: 6px;
    margin: 0 16px;
}
.vr-marker {
    position: absolute;
    transform: translateX(-50%);
    top: 14px !important; /* Match compact PIR positioning */
    text-align: center;
    font-size: 0.6rem;
    color: var(--text-muted);
    white-space: nowrap;
}
.vr-marker-price {
    font-family: var(--font-data);
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-secondary);
}
.vr-marker-label {
    font-size: 0.58rem;
    color: var(--text-muted);
    margin-top: 2px;
}
.vr-marker::before {
    content: '';
    position: absolute;
    top: -14px !important;
    left: 50%;
    transform: translateX(-50%);
    width: 1px;
    height: 14px !important;
    background: rgba(138,154,184,0.4);
}
.vr-current {
    position: absolute;
    transform: translateX(-50%);
    top: -24px !important;
    text-align: center;
    white-space: nowrap;
    font-family: var(--font-data);
    font-size: 0.72rem;
    font-weight: 700;
    color: var(--accent-teal);
}
.vr-current::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 1px;
    height: 10px !important;
    background: var(--accent-teal);
}
.vr-stats {
    display: flex; gap: var(--space-md); flex-wrap: wrap;
    font-size: 0.65rem; color: var(--text-muted); margin-top: var(--space-xs);
}
.vr-stats span { white-space: nowrap; }
.vr-stats .pos { color: var(--signal-green); }
.vr-stats .neg { color: var(--signal-red); }

/* 1.4 Skew Indicator */
.rh-skew-indicator { display: flex; flex-wrap: wrap; align-items: baseline; gap: 6px; }
.rh-skew-indicator .rh-spec-text { flex-basis: 100%; margin-top: 4px; }
.rh-skew-value {
    font-family: var(--font-data);
    font-size: 0.8rem;
    font-weight: 700;
    letter-spacing: 0.08em;
    padding: 2px 8px;
    border-radius: 3px;
}
.rh-skew-down { color: var(--signal-red); background: rgba(239,68,68,0.08); }
.rh-skew-up   { color: var(--signal-green); background: rgba(34,184,167,0.08); }
.rh-skew-balanced { color: var(--signal-amber); background: rgba(245,158,11,0.08); }

/* 1.5 Next Decision Point */
.ndp-event {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-top: var(--space-xs);
    margin-bottom: 2px;
}
.ndp-date { color: var(--text-muted); font-weight: 400; }

/* --- Report Page: Sparkline --- */
.rh-sparkline {
    margin-bottom: var(--space-xs);
    line-height: 0;
    display: flex;
    justify-content: flex-end;
}
.rh-sparkline svg {
    width: 280px;
    height: 88px;
}

/* --- Report Page: Risk Skew Bar --- */
.risk-skew-bar {
    background: var(--bg-surface);
    padding: var(--space-md) 0;
    border-bottom: 1px solid var(--border);
}
.rsb-inner {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--space-lg);
    display: flex;
    align-items: center;
    gap: var(--space-md);
}
.rsb-label {
    font-size: 0.55rem; font-weight: 700;
    letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--text-muted);
}
.rsb-rationale {
    font-size: 0.82rem;
    color: var(--text-secondary);
    flex: 1;
}

/* --- Report Page: Verdict --- */
.verdict-section {
    background: var(--bg-surface);
    border-bottom: 3px solid var(--accent-sage);
    padding: var(--space-lg) 0;
}
.verdict-inner {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-xl);
    flex-wrap: wrap;
}
.verdict-text {
    font-family: var(--font-narrative);
    font-size: 0.95rem; font-weight: 600;
    color: var(--accent-gold);
    line-height: 1.5;
    flex: 1;
    min-width: 300px;
}
.verdict-scores {
    display: flex; gap: var(--space-md);
    flex-shrink: 0;
}
.vs-item { text-align: center; min-width: 60px; }
.vs-label {
    font-size: 0.5rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.04em;
    color: var(--text-muted);
    margin-bottom: 2px;
}
.vs-score {
    font-family: var(--font-data);
    font-size: 1.1rem; font-weight: 700;
}
.vs-direction {
    font-size: 0.5rem; font-weight: 600;
    color: var(--text-muted);
}

/* --- Report Page: Signal Bars --- */
.signal-bars-section {
    background: var(--bg-surface-alt);
    border-bottom: 1px solid var(--border);
}
[data-theme="light"] .signal-bars-section { background: var(--bg-surface-alt); }
.sb-row {
    display: flex; align-items: flex-start; gap: 10px;
    padding: 8px 0; border-bottom: 1px solid var(--border);
    min-height: 36px;
}
.sb-row:last-child { border-bottom: none; }
.sb-indicator {
    width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0; margin-top: 3px;
}
.sb-indicator.critical, .sb-indicator.downside { background: var(--signal-red); }
.sb-indicator.positive, .sb-indicator.upside { background: var(--signal-green); }
.sb-indicator.neutral { background: var(--text-muted); }
.sb-indicator.amber { background: var(--signal-amber); }
.sb-row-label {
    font-size: 0.55rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--text-muted); width: 148px; flex-shrink: 0; padding-top: 2px;
}
.sb-badge {
    font-size: 0.6rem; font-weight: 800; letter-spacing: 0.06em; text-transform: uppercase;
    padding: 2px 8px; border-radius: 3px; flex-shrink: 0; white-space: nowrap;
}
.sb-badge.critical { background: rgba(212,85,85,0.15); color: var(--signal-red); }
.sb-badge.downside { background: rgba(212,85,85,0.15); color: var(--signal-red); }
.sb-badge.upside { background: rgba(61,170,109,0.15); color: var(--signal-green); }
.sb-badge.positive { background: rgba(61,170,109,0.15); color: var(--signal-green); }
.sb-badge.neutral { background: rgba(0,0,0,0.08); color: var(--text-muted); }
.sb-badge.amber { background: rgba(212,160,60,0.15); color: var(--signal-amber); }
[data-theme="light"] .sb-badge.neutral { background: rgba(0,0,0,0.06); }
.sb-items {
    display: flex; align-items: center; gap: 6px; flex-wrap: wrap; flex: 1; padding-top: 2px;
}
.sb-item { font-size: 0.78rem; color: var(--text-secondary); font-family: var(--font-data); }
.sb-item.pos { color: var(--signal-green); }
.sb-item.neg { color: var(--signal-red); }
.sb-sep { color: var(--border); font-size: 0.78rem; }
.sb-company-body { flex: 1; }
.sb-score-line { display: flex; align-items: center; gap: var(--space-sm); margin-bottom: 4px; }
.sb-score { font-family: var(--font-data); font-size: 1rem; font-weight: 800; }
.sb-score.neg { color: var(--signal-red); }
.sb-score.pos { color: var(--signal-green); }
.sb-score.neutral { color: var(--signal-amber); }
.sb-score-track {
    width: 80px; height: 16px; border-radius: 8px; overflow: hidden; display: flex;
    background: var(--bg-elevated);
}
.sb-desc { font-size: 0.72rem; color: var(--text-secondary); margin-bottom: 6px; line-height: 1.4; }
.sb-hyp-chips { display: flex; gap: 6px; flex-wrap: wrap; }
.sb-hyp-chip {
    font-size: 0.58rem; font-weight: 700; letter-spacing: 0.04em; text-transform: uppercase;
    border: 1px solid var(--border); border-radius: 3px; padding: 2px 7px; color: var(--text-muted);
    white-space: nowrap;
}
.sb-hyp-chip.downside { border-color: rgba(212,85,85,0.4); color: var(--signal-red); }
.sb-hyp-chip.upside { border-color: rgba(61,170,109,0.4); color: var(--signal-green); }
.sb-hyp-chip .chip-pct { font-weight: 800; margin-left: 3px; }

/* Report-scoped lighter bar colours */
.signal-bars-section .skew-bar-bull,
.risk-skew-bar .skew-bar-bull {
    background: #5BC88A;
}
.signal-bars-section .skew-bar-bear,
.risk-skew-bar .skew-bar-bear {
    background: #E87A7A;
}
[data-theme="light"] .signal-bars-section .skew-bar-bull,
[data-theme="light"] .risk-skew-bar .skew-bar-bull {
    background: #6DD49A;
}
[data-theme="light"] .signal-bars-section .skew-bar-bear,
[data-theme="light"] .risk-skew-bar .skew-bar-bear {
    background: #E88A8A;
}

/* --- Report Page: Section Nav --- */
.section-nav {
    background: var(--bg-page);
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: var(--nav-height);
    z-index: 50;
}
.section-nav-inner {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--space-lg);
    display: flex;
    gap: var(--space-xs);
    overflow-x: auto;
}
.section-nav a {
    font-size: 0.68rem; font-weight: 600;
    letter-spacing: 0.04em; text-transform: uppercase;
    color: var(--text-muted);
    padding: 12px var(--space-md);
    border-bottom: 2px solid transparent;
    white-space: nowrap;
    transition: color 0.2s, border-color 0.2s;
}
.section-nav a:hover { color: var(--text-secondary); }
.section-nav a.active {
    color: var(--accent-teal);
    border-bottom-color: var(--accent-teal);
}

/* --- Report Sections --- */
.report-content {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: var(--space-xl) var(--space-lg);
}
/* --- Refresh controls --- */
.refresh-controls {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: var(--space-sm);
}
.btn-refresh {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-family: var(--font-data);
    font-size: 0.68rem;
    font-weight: 600;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--accent-teal);
    background: rgba(74, 158, 126, 0.10);
    border: 1px solid rgba(74, 158, 126, 0.25);
    border-radius: 4px;
    padding: 5px 14px;
    cursor: pointer;
    transition: all 0.2s;
}
.btn-refresh:hover { background: rgba(74, 158, 126, 0.20); color: var(--text-primary); }
.btn-refresh:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
.btn-refresh .refresh-icon {
    display: inline-block;
    transition: transform 0.3s;
}
.btn-refresh.refreshing .refresh-icon {
    animation: spin 1s linear infinite;
}
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.refresh-timestamp {
    font-family: var(--font-data);
    font-size: 0.62rem;
    color: var(--text-muted);
    letter-spacing: 0.02em;
}
.refresh-progress {
    display: flex;
    align-items: center;
    gap: 10px;
    flex: 1;
}
.progress-bar {
    width: 120px;
    height: 4px;
    background: var(--border);
    border-radius: 2px;
    overflow: hidden;
}
.progress-fill {
    height: 100%;
    width: 0%;
    background: var(--accent-teal);
    border-radius: 2px;
    transition: width 0.5s ease;
}
.progress-label {
    font-family: var(--font-data);
    font-size: 0.6rem;
    color: var(--accent-sage);
    letter-spacing: 0.02em;
}

.report-section {
    margin-bottom: var(--space-2xl);
    scroll-margin-top: calc(var(--nav-height) + 50px);
}
.rs-number {
    font-family: var(--font-data);
    font-size: 0.6rem; font-weight: 600;
    color: var(--accent-teal);
    letter-spacing: 0.08em; text-transform: uppercase;
    margin-bottom: var(--space-xs);
}
.rs-title {
    font-family: var(--font-narrative);
    font-size: 1.3rem; font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-xs);
    padding-bottom: var(--space-sm);
    border-bottom: 2px solid var(--accent-teal);
}
.rs-subtitle {
    font-size: 0.88rem; font-weight: 700;
    color: var(--accent-teal);
    margin-top: var(--space-lg);
    margin-bottom: var(--space-sm);
}
.rs-text {
    font-size: 0.88rem; line-height: 1.7;
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}
.rs-text strong { color: var(--text-primary); font-weight: 600; }
.key-stat {
    font-family: var(--font-data);
    font-weight: 600;
    color: var(--accent-teal);
}
.key-stat.down {
    color: var(--signal-red);
}
.key-stat.up {
    color: var(--signal-green);
}

/* --- Sticky Hypothesis Sidebar (desktop) --- */
@media (min-width: 1200px) {
    .report-content {
        display: grid;
        grid-template-columns: 1fr 220px;
        gap: var(--space-xl);
        max-width: var(--max-width);
    }
    .report-main {
        min-width: 0;
    }
    .hyp-sidebar {
        position: sticky;
        top: calc(var(--nav-height) + 60px);
        align-self: start;
        height: fit-content;
        max-height: calc(100vh - var(--nav-height) - 80px);
        overflow-y: auto;
    }
    /* Align hero, skew bar, verdict, and section nav with the grid main column */
    .report-hero-inner,
    .rsb-inner,
    .nfi-alert-inner,
    .verdict-inner,
    .section-nav-inner {
        max-width: var(--max-width);
        padding-right: var(--space-lg);
        margin: 0 auto;
    }
}
@media (max-width: 1199px) {
    .hyp-sidebar { display: none; }
    .report-main { min-width: 0; }
}
.hyp-sidebar {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: var(--space-md);
}
.hs-stock-id {
    margin-bottom: var(--space-sm);
    padding-bottom: var(--space-sm);
    border-bottom: 1px solid var(--border);
}
.hs-stock-ticker {
    font-family: var(--font-data);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: 0.02em;
}
.hs-stock-name {
    font-size: 0.68rem;
    color: var(--text-muted);
    line-height: 1.3;
    margin-top: 2px;
}
.hs-title {
    font-size: 0.55rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-bottom: var(--space-md);
    padding-bottom: var(--space-xs);
    border-bottom: 1px solid var(--border);
}
.hs-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: 6px 0;
    border-bottom: 1px solid rgba(30,48,80,0.4);
}
.hs-item:last-child { border-bottom: none; }
.hs-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}
.hs-dot.dir-up { background: var(--signal-green); }
.hs-dot.dir-down { background: var(--signal-red); }
.hs-dot.dir-neutral { background: var(--signal-amber); }
.hs-label {
    font-size: 0.7rem;
    color: var(--text-secondary);
    flex: 1;
    line-height: 1.3;
}
.hs-score {
    font-family: var(--font-data);
    font-size: 0.75rem;
    font-weight: 700;
    min-width: 32px;
    text-align: right;
}
.hs-score.dir-up { color: var(--signal-green); }
.hs-score.dir-down { color: var(--signal-red); }
.hs-score.dir-neutral { color: var(--signal-amber); }
.hs-bar {
    width: 100%;
    height: 8px;
    background: var(--bg-elevated);
    border-radius: 4px;
    margin-top: 4px;
    overflow: hidden;
}
.hs-bar-fill {
    height: 100%;
    border-radius: 2px;
}
.hs-skew {
    margin-top: var(--space-md);
    padding-top: var(--space-sm);
    border-top: 1px solid var(--border);
    text-align: center;
}
.hs-skew-label {
    font-size: 0.5rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    margin-bottom: 4px;
}

/* ── Sidebar: Price row ── */
.hs-price-row {
    display: flex;
    align-items: baseline;
    gap: 6px;
    margin-top: 2px;
}
.hs-price {
    font-family: var(--font-data);
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
}
.hs-change-badge {
    font-family: var(--font-data);
    font-size: 0.6rem;
    font-weight: 600;
    padding: 1px 5px;
    border-radius: 3px;
}
.hs-change-badge.pos { background: rgba(72,187,120,0.12); color: var(--signal-green); }
.hs-change-badge.neg { background: rgba(245,101,101,0.12); color: var(--signal-red); }

/* ── Sidebar: Section headings ── */
.hs-section-head {
    font-size: 0.5rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-top: var(--space-md);
    margin-bottom: var(--space-xs);
    padding-bottom: var(--space-xs);
    border-bottom: 1px solid var(--border);
}
.hs-subhead {
    font-size: 0.48rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    margin-top: var(--space-sm);
    margin-bottom: 4px;
}

/* ── Sidebar: Overall Skew row ── */
.hs-overall-skew {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid rgba(30,48,80,0.4);
}
.hs-skew-dir {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
}
.hs-skew-dir.upside   { color: var(--signal-green); }
.hs-skew-dir.downside { color: var(--signal-red); }
.hs-skew-dir.balanced { color: var(--signal-amber); }
.hs-skew-score {
    font-family: var(--font-data);
    font-size: 0.75rem;
    font-weight: 700;
}
.hs-skew-score.upside   { color: var(--signal-green); }
.hs-skew-score.downside { color: var(--signal-red); }
.hs-skew-score.balanced { color: var(--signal-amber); }

/* ── Sidebar: Environment rows (Macro/Sector) ── */
.hs-env-row {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: 5px 0;
    border-bottom: 1px solid rgba(30,48,80,0.4);
}
.hs-env-row:last-child { border-bottom: none; }
.hs-env-label {
    font-size: 0.68rem;
    color: var(--text-secondary);
    flex: 1;
}
.hs-env-score {
    font-family: var(--font-data);
    font-size: 0.7rem;
    font-weight: 600;
    min-width: 28px;
    text-align: right;
}

/* ── Sidebar: Company metric rows (P/E, Rev Growth) ── */
.hs-company-row {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: 5px 0;
    border-bottom: 1px solid rgba(30,48,80,0.4);
}
.hs-company-row:last-child { border-bottom: none; }
.hs-company-label {
    font-size: 0.68rem;
    color: var(--text-secondary);
    flex: 1;
}
.hs-company-value {
    font-family: var(--font-data);
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* ── Sidebar: Valuation Range ── */
.hs-val-section {
    margin-top: var(--space-sm);
}
.hs-val-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}
.hs-val-zone {
    font-size: 0.5rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    padding: 1px 6px;
    border-radius: 3px;
}
.hs-val-zone.amber   { background: rgba(201,169,110,0.15); color: var(--signal-amber); }
.hs-val-zone.green   { background: rgba(72,187,120,0.12);  color: var(--signal-green); }
.hs-val-zone.red     { background: rgba(245,101,101,0.12); color: var(--signal-red); }
.hs-val-levels {
    display: flex;
    justify-content: space-between;
    font-family: var(--font-data);
    font-size: 0.58rem;
    color: var(--text-muted);
    margin-bottom: 4px;
}
.hs-val-levels span { text-align: center; }
.hs-val-bar {
    width: 100%;
    height: 5px;
    border-radius: 3px;
    background: linear-gradient(90deg, var(--signal-red), var(--signal-amber) 40%, var(--signal-green));
    position: relative;
    margin-bottom: 6px;
}
.hs-val-marker {
    position: absolute;
    top: -3px;
    width: 3px;
    height: 11px;
    background: var(--text-primary);
    border-radius: 1px;
    transform: translateX(-50%);
}
.hs-val-distances {
    display: flex;
    justify-content: space-between;
    font-family: var(--font-data);
    font-size: 0.55rem;
}
.hs-val-distances .pos { color: var(--signal-green); }
.hs-val-distances .neg { color: var(--signal-red); }

/* --- Evidence Domain Cards --- */
.evidence-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    margin-bottom: var(--space-md);
    overflow: hidden;
}
.ec-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-md) var(--space-lg);
    cursor: pointer;
    transition: background 0.15s;
}
.ec-header:hover { background: var(--bg-surface-alt); }
.ec-title {
    font-weight: 700;
    font-size: 0.88rem;
    color: var(--text-primary);
}
.ec-header-right {
    display: flex; align-items: center; gap: var(--space-sm);
}
.ec-epistemic {
    font-size: 0.55rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    padding: 2px 8px; border-radius: 3px;
}
.ep-motivated { background: rgba(212, 160, 60, 0.15); color: var(--signal-amber); }
.ep-statutory { background: rgba(61, 170, 109, 0.15); color: var(--signal-green); }
.ep-consensus { background: rgba(74, 142, 204, 0.15); color: var(--signal-blue); }
.ep-independent { background: rgba(140, 100, 200, 0.15); color: #8B6CC1; }
.ep-objective { background: rgba(26, 158, 143, 0.15); color: var(--accent-teal); }
.ep-behavioural { background: rgba(212, 160, 60, 0.12); color: var(--accent-gold); }
.ep-peerreviewed { background: rgba(140, 100, 200, 0.12); color: #8B6CC1; }
.ep-noise { background: rgba(86, 104, 130, 0.2); color: var(--text-muted); }
.ec-toggle {
    font-size: 0.7rem; color: var(--text-muted);
    transition: transform 0.3s;
}
.ec-toggle.open { transform: rotate(180deg); }
.ec-body {
    padding: 0 var(--space-lg) var(--space-lg);
    display: none;
}
.ec-body.open { display: block; }
.ec-finding {
    font-size: 0.82rem; line-height: 1.7;
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}
.ec-finding strong { color: var(--text-primary); }
.ec-tension {
    background: rgba(212, 160, 60, 0.06);
    border-left: 2px solid var(--signal-amber);
    padding: var(--space-sm) var(--space-md);
    border-radius: 0 4px 4px 0;
    margin-bottom: var(--space-md);
}
.ec-tension-label {
    font-size: 0.55rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    color: var(--signal-amber);
    margin-bottom: 2px;
}
.ec-tension p {
    font-size: 0.78rem; line-height: 1.6;
    color: var(--text-secondary); margin: 0;
}
.ec-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--space-sm);
    border-top: 1px solid var(--border);
    flex-wrap: wrap; gap: var(--space-sm);
}
.ec-tags { display: flex; gap: 4px; flex-wrap: wrap; }
.ec-tag {
    font-size: 0.52rem; font-weight: 600;
    padding: 2px 6px; border-radius: 2px;
}
.ec-tag.supports { background: rgba(61,170,109,0.12); color: var(--signal-green); }
.ec-tag.contradicts { background: rgba(212,85,85,0.12); color: var(--signal-red); }
.ec-tag.neutral { background: rgba(86,104,130,0.15); color: var(--text-muted); }
.ec-tag.strong { background: rgba(61,170,109,0.2); color: var(--signal-green); font-weight: 700; }
.ec-source {
    font-size: 0.6rem; color: var(--text-muted);
    font-style: italic;
}

/* --- Evidence Alignment Table --- */
.evidence-table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-lg) 0;
    font-size: 0.78rem;
}
.evidence-table thead th {
    background: var(--bg-header);
    color: var(--text-primary);
    font-size: 0.6rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.06em;
    padding: var(--space-sm) var(--space-md);
    text-align: left;
}
.evidence-table tbody td {
    padding: var(--space-sm) var(--space-md);
    border-bottom: 1px solid var(--border);
    color: var(--text-secondary);
    vertical-align: middle;
}
.evidence-table tbody tr:nth-child(even) { background: var(--bg-surface-alt); }
.evidence-table tbody td:first-child {
    font-weight: 600; color: var(--text-primary);
}
.et-up { color: var(--signal-green); font-weight: 700; }
.et-down { color: var(--signal-red); font-weight: 700; }
.et-strong { color: var(--signal-green); font-weight: 800; }
.et-neutral { color: var(--text-muted); }

/* --- Hypothesis Cards --- */
.hyp-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: var(--space-lg);
    margin-bottom: var(--space-md);
}
.hyp-card.dir-up { border-left: 4px solid var(--signal-green); }
.hyp-card.dir-down { border-left: 4px solid var(--signal-red); }
.hyp-card.dir-neutral { border-left: 4px solid var(--signal-amber); }
/* N1 prominence  --  dominant hypothesis visually highlighted */
.hyp-card.dominant {
    border-width: 2px;
    border-left-width: 5px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    position: relative;
}
.hyp-card.dominant::after {
    content: 'DOMINANT';
    position: absolute; top: var(--space-sm); right: var(--space-sm);
    font-size: 0.55rem; font-weight: 700; letter-spacing: 0.1em;
    padding: 2px 8px; border-radius: 3px;
    background: rgba(0, 0, 0, 0.04); color: var(--text-muted);
}
.hc-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-md);
}
.hc-title {
    font-family: var(--font-narrative);
    font-size: 1.05rem; font-weight: 700;
    color: var(--text-primary);
}
.hc-status {
    font-size: 0.55rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    padding: 3px 10px; border-radius: 3px;
    white-space: nowrap;
}
.hc-status.priced { background: rgba(61,170,109,0.1); color: var(--signal-green); }
.hc-status.accumulating { background: rgba(212,160,60,0.1); color: var(--signal-amber); }
.hc-status.active { background: rgba(212,85,85,0.1); color: var(--signal-red); }
.hc-status.minimal { background: var(--bg-elevated); color: var(--text-muted); }
.hc-score-row {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-md);
}
.hc-score-number {
    font-family: var(--font-data);
    font-size: 1.6rem; font-weight: 800;
    min-width: 48px;
}
.dir-up .hc-score-number { color: var(--signal-green); }
.dir-down .hc-score-number { color: var(--signal-red); }
.dir-neutral .hc-score-number { color: var(--signal-amber); }
.hc-score-bar {
    flex: 1; height: 6px;
    background: var(--bg-elevated);
    border-radius: 3px; overflow: hidden;
}
.hc-score-fill { height: 100%; border-radius: 3px; }
.dir-up .hc-score-fill { background: var(--signal-green); }
.dir-down .hc-score-fill { background: var(--signal-red); }
.dir-neutral .hc-score-fill { background: var(--signal-amber); }
.hc-score-meta {
    font-size: 0.7rem; color: var(--text-muted);
    white-space: nowrap;
}
.hc-desc {
    font-size: 0.82rem; line-height: 1.6;
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}
.hc-subtitle {
    font-size: 0.65rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.04em;
    color: var(--text-muted);
    margin-top: var(--space-md);
    margin-bottom: var(--space-xs);
}
.hc-list {
    list-style: none; padding: 0;
}
.hc-list li {
    font-size: 0.78rem; color: var(--text-secondary);
    padding: 3px 0 3px 16px;
    position: relative; line-height: 1.5;
}
.hc-list li::before {
    content: '';
    position: absolute; left: 0; top: 9px;
    width: 5px; height: 5px; border-radius: 50%;
}
.hc-list.supports li::before { background: var(--signal-green); }
.hc-list.contradicts li::before { background: var(--signal-red); }
.hc-list.requires li::before { background: var(--accent-teal); border-radius: 0; }
.hc-list li strong { color: var(--text-primary); }

/* Overcorrection banner  --  v3 framework amber alert */
.overcorrection-banner {
    background: rgba(212, 160, 60, 0.08);
    border: 1px solid var(--signal-amber);
    border-left: 4px solid var(--signal-amber);
    border-radius: var(--radius);
    padding: var(--space-sm) var(--space-md);
    margin: var(--space-md) 0;
}
.overcorrection-banner .oc-label {
    font-size: 0.6rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.08em;
    color: var(--signal-amber); margin-bottom: var(--space-xs);
}
.overcorrection-banner .oc-message {
    font-size: 0.82rem; line-height: 1.5;
    color: var(--text-secondary); margin: 0;
}
.overcorrection-banner .oc-review {
    font-size: 0.72rem; color: var(--text-muted);
    margin-top: var(--space-xs);
}
.overcorrection-banner.confirmed {
    border-color: var(--signal-green);
    background: rgba(72, 199, 142, 0.06);
}
.overcorrection-banner.confirmed .oc-label { color: var(--signal-green); }

/* --- Narrative Timeline Chart --- */
.narrative-timeline-section {
    margin-top: var(--space-lg);
}
.nt-chart-container {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: var(--space-md);
    margin-bottom: var(--space-md);
    position: relative;
}
.nt-chart-header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: var(--space-sm);
}
.nt-chart-title {
    font-family: var(--font-ui);
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
}
.nt-chart-badge {
    font-family: var(--font-data); font-size: 0.55rem; font-weight: 700;
    letter-spacing: 0.08em; color: var(--text-muted); background: var(--bg-elevated);
    padding: 2px 8px; border-radius: 3px; border: 1px solid var(--border);
}
.nt-chart-canvas-wrap {
    position: relative;
    height: 320px;
}
.nt-chart-canvas-wrap canvas {
    width: 100% !important;
    height: 100% !important;
}
.nt-chart-loading {
    display: flex; align-items: center; justify-content: center;
    height: 320px; color: var(--text-muted); font-family: var(--font-ui);
    font-size: 0.75rem; gap: var(--space-sm);
}
.nt-chart-loading .spinner {
    width: 18px; height: 18px; border: 2px solid var(--border);
    border-top-color: var(--accent-teal); border-radius: 50%;
    animation: spin 0.8s linear infinite;
}
.nt-chart-empty {
    display: flex; align-items: center; justify-content: center;
    height: 200px; color: var(--text-muted); font-family: var(--font-ui);
    font-size: 0.8rem; text-align: center;
}
.nt-flip-legend {
    display: flex; flex-wrap: wrap; gap: var(--space-sm);
    margin-top: var(--space-sm); padding-top: var(--space-sm);
    border-top: 1px solid var(--border);
}
.nt-flip-item {
    font-family: var(--font-data); font-size: 0.65rem;
    color: var(--text-muted); display: flex; align-items: center; gap: 4px;
}
.nt-flip-marker {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--signal-amber); display: inline-block;
}
.nt-flip-marker.oc { background: var(--signal-red); }
[data-theme="light"] .nt-chart-container { background: #FFFFFF; border-color: #E2E8F0; }

/* --- Tripwire Cards --- */
.tw-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: var(--space-md) var(--space-lg);
    margin-bottom: var(--space-md);
}
.tw-card.tw-resolved {
    opacity: 0.6;
    border-left: 3px solid var(--text-muted);
}
.tw-card.tw-resolved .tw-date::after {
    content: ' \2713';
    color: var(--signal-green);
}
.tw-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}
.tw-date {
    font-family: var(--font-data);
    font-size: 0.72rem; font-weight: 700;
    color: var(--accent-gold);
}
.tw-name {
    font-size: 0.68rem; font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.04em;
}
.tw-conditions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-md);
}
.tw-condition {
    background: var(--bg-elevated);
    border-radius: 4px;
    padding: var(--space-sm) var(--space-md);
}
.tw-cond-if {
    font-size: 0.68rem; font-weight: 600;
    margin-bottom: var(--space-xs);
}
.tw-cond-if.positive { color: var(--signal-green); }
.tw-cond-if.negative { color: var(--signal-red); }
.tw-cond-if.resolved { color: var(--text-muted); font-style: italic; }
.tw-cond-then {
    font-size: 0.72rem; color: var(--text-secondary);
    line-height: 1.4;
}
.tw-source {
    font-size: 0.6rem; color: var(--text-muted);
    font-style: italic;
    margin-top: var(--space-sm);
}

/* --- Gaps Table --- */
.gaps-table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-md) 0;
    font-size: 0.78rem;
}
.gaps-table thead th {
    background: var(--bg-header);
    color: var(--text-primary);
    font-size: 0.6rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.06em;
    padding: var(--space-sm) var(--space-md);
    text-align: left;
}
.gaps-table tbody td {
    padding: var(--space-sm) var(--space-md);
    border-bottom: 1px solid var(--border);
    color: var(--text-secondary);
}
.gaps-table tbody tr:nth-child(even) { background: var(--bg-surface-alt); }
.gap-dot {
    display: inline-block;
    width: 8px; height: 8px;
    border-radius: 50%;
    margin-right: 6px;
    vertical-align: middle;
}
.gap-dot.full { background: var(--signal-green); }
.gap-dot.good { background: var(--accent-sage); }
.gap-dot.partial { background: var(--signal-amber); }
.gap-dot.limited { background: var(--text-muted); }

/* --- Discriminates Table --- */
.disc-table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-md) 0;
    font-size: 0.78rem;
}
.disc-table thead th {
    background: var(--bg-header);
    color: var(--text-primary);
    font-size: 0.6rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.06em;
    padding: var(--space-sm) var(--space-md);
    text-align: left;
}
.disc-table tbody td {
    padding: 10px var(--space-md);
    border-bottom: 1px solid var(--border);
    color: var(--text-secondary);
    vertical-align: top;
}
.disc-table tbody tr:nth-child(even) { background: var(--bg-surface-alt); }
.disc-high { color: var(--signal-red); font-weight: 700; }
.disc-med { color: var(--signal-amber); font-weight: 700; }

/* --- Identity Table --- */
.identity-table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--space-md) 0;
    font-size: 0.78rem;
}
.identity-table thead th {
    background: var(--bg-header);
    color: var(--text-primary);
    font-size: 0.6rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.06em;
    padding: var(--space-sm) var(--space-md);
    text-align: left;
}
.identity-table tbody td {
    padding: var(--space-sm) var(--space-md);
    border-bottom: 1px solid var(--border);
    color: var(--text-secondary);
}
.identity-table tbody tr:nth-child(even) { background: var(--bg-surface-alt); }
.identity-table .td-label { font-weight: 600; color: var(--text-primary); }
.identity-table .td-mono {
    font-family: var(--font-data);
    font-size: 0.75rem;
}
.td-green { color: var(--signal-green); }
.td-red { color: var(--signal-red); }
.td-amber { color: var(--signal-amber); }

/* --- Report Footer --- */
.report-footer-section {
    background: var(--bg-surface);
    border-top: 1px solid var(--border);
    padding: var(--space-lg) 0;
    margin-top: var(--space-2xl);
}
.rf-inner {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--space-lg);
}
.rf-disclaimer-text {
    font-size: 0.65rem; line-height: 1.7;
    color: var(--text-muted);
    margin-bottom: var(--space-md);
}
.rf-meta-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
    flex-wrap: wrap; gap: var(--space-sm);
}
.rf-meta-item {
    font-family: var(--font-data);
    font-size: 0.58rem;
    color: var(--text-muted);
}
.rf-brand {
    font-size: 0.65rem; font-weight: 700;
    letter-spacing: 0.12em; text-transform: uppercase;
    color: var(--text-muted);
}

/* ============================================================
   PDF REPORT DOWNLOAD
   ============================================================ */
.report-download-section {
    background: var(--bg-surface);
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    padding: var(--space-xl) 0;
    margin-top: var(--space-xl);
}
.report-download-inner {
    max-width: var(--max-width);
    margin: 0 auto;
    padding: 0 var(--space-lg);
    text-align: center;
}
.report-download-title {
    font-family: var(--font-narrative);
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-xs);
}
.report-download-subtitle {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-bottom: var(--space-lg);
}
.report-download-buttons {
    display: flex;
    justify-content: center;
    gap: var(--space-md);
    flex-wrap: wrap;
}
.btn-pdf-download {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    padding: 14px 28px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--bg-elevated);
    cursor: pointer;
    transition: all 0.2s;
    min-width: 220px;
    font-family: var(--font-ui);
}
.btn-pdf-download:hover {
    background: var(--bg-surface-alt);
    border-color: var(--accent-sage);
    transform: translateY(-1px);
}
.btn-pdf-download.institutional { border-left: 3px solid var(--accent-sage); }
.btn-pdf-download.retail { border-left: 3px solid var(--accent-gold); }
.btn-pdf-label {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
}
.btn-pdf-sub {
    font-size: 0.65rem;
    color: var(--text-muted);
    margin-top: 4px;
}
.btn-pdf-spinner {
    display: none;
    width: 14px; height: 14px;
    border: 2px solid var(--text-muted);
    border-top-color: var(--accent-sage);
    border-radius: 50%;
    animation: pdf-spin 0.8s linear infinite;
    margin-left: 8px;
    vertical-align: middle;
}
.btn-pdf-download.generating .btn-pdf-spinner { display: inline-block; }
.btn-pdf-download.generating { opacity: 0.7; pointer-events: none; }
@keyframes pdf-spin { to { transform: rotate(360deg); } }

/* Narrative dislocation alert CSS removed  --  consolidated into NFI dislocation indicator */

/* ============================================================
   EPISTEMIC BADGES: Leadership & Ownership
   ============================================================ */
.ep-governance { background: rgba(201, 169, 110, 0.15); color: var(--accent-gold); }
.ep-registry { background: rgba(61, 170, 109, 0.12); color: var(--signal-green); }

/* ============================================================
   TECHNICAL ANALYSIS  --  Section Styles
   ============================================================ */

/* Container */
.ta-section { margin-top: var(--space-lg); }

/* TA Chart */
.ta-chart-container {
    margin-bottom: var(--space-lg);
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: var(--space-md) var(--space-sm) var(--space-sm);
    overflow: hidden;
}
.ta-chart-title {
    font-family: var(--font-ui);
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
    padding-left: var(--space-xs);
}
.ta-chart-svg {
    width: 100%;
    height: auto;
    display: block;
}
.ta-chart-header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: var(--space-sm); padding: 0 var(--space-xs);
}
.ta-chart-live-badge {
    font-family: var(--font-data); font-size: 0.55rem; font-weight: 700;
    letter-spacing: 0.08em; color: #0B1220; background: var(--signal-green);
    padding: 2px 8px; border-radius: 3px; animation: livePulse 2s ease-in-out infinite;
}
.ta-chart-static-badge {
    font-family: var(--font-data); font-size: 0.55rem; font-weight: 700;
    letter-spacing: 0.08em; color: var(--text-muted); background: var(--bg-elevated);
    padding: 2px 8px; border-radius: 3px; border: 1px solid var(--border);
}
@keyframes livePulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
.ta-chart-loading {
    display: flex; align-items: center; justify-content: center;
    height: auto; color: var(--text-muted); font-family: var(--font-ui);
    font-size: 0.75rem; gap: var(--space-sm); background: rgba(11,18,32,0.75);
}
[data-theme="light"] .ta-chart-loading { background: rgba(245,246,248,0.75); }
.ta-chart-loading .spinner {
    width: 18px; height: 18px; border: 2px solid var(--border);
    border-top-color: var(--accent-teal); border-radius: 50%;
    animation: spin 0.8s linear infinite;
}
.rh-live-indicator {
    display: inline-flex; align-items: center; gap: 4px;
    font-family: var(--font-data); font-size: 0.55rem; font-weight: 600;
    letter-spacing: 0.06em; color: var(--text-muted); margin-left: var(--space-sm);
}
.rh-live-indicator .live-dot {
    width: 6px; height: 6px; border-radius: 50%; background: var(--signal-green);
    animation: livePulse 2s ease-in-out infinite;
}
.rh-price-change { font-size: 0.8rem; color: var(--text-muted); margin-top: 2px; font-family: var(--font-data); }
.rh-price-change.positive { color: var(--signal-green); }
.rh-price-change.negative { color: var(--signal-red); }

/* Dynamic adjustment indicators */
.dynamic-adj { font-size: 0.75em; color: var(--text-muted); font-style: italic; }
.dynamic-badge {
    display: inline-flex; align-items: center; gap: 4px;
    font-family: var(--font-data); font-size: 0.55rem; font-weight: 600;
    letter-spacing: 0.06em; color: var(--accent-teal); margin-left: var(--space-sm);
    background: rgba(26, 158, 143, 0.1); padding: 2px 8px; border-radius: 3px;
}
.dynamic-badge .dynamic-dot {
    width: 5px; height: 5px; border-radius: 50%; background: var(--accent-teal);
}

/* Regime / Clarity / Key Level badges at top */
.ta-regime-bar {
    display: flex; gap: var(--space-md); flex-wrap: wrap;
    padding: var(--space-md) 0; margin-bottom: var(--space-md);
    border-bottom: 1px solid var(--border);
}
.ta-regime-item {
    display: flex; flex-direction: column; gap: 2px;
}
.ta-regime-label {
    font-size: 0.55rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--text-muted);
}
.ta-regime-value {
    font-family: var(--font-data); font-size: 0.88rem; font-weight: 600;
    color: var(--text-primary);
}
.ta-regime-value.ta-down { color: var(--signal-red); }
.ta-regime-value.ta-up { color: var(--signal-green); }
.ta-regime-value.ta-neutral { color: var(--signal-amber); }

/* Moving Average table */
.ta-ma-table {
    width: 100%; border-collapse: collapse; font-size: 0.75rem;
    margin-bottom: var(--space-md);
}
.ta-ma-table th {
    text-align: left; font-size: 0.6rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    color: var(--text-muted); padding: 8px 12px;
    border-bottom: 2px solid var(--border);
}
.ta-ma-table td {
    padding: 8px 12px; border-bottom: 1px solid var(--border);
    font-family: var(--font-data); font-size: 0.78rem;
    color: var(--text-secondary);
}
.ta-ma-table tr:last-child td { border-bottom: none; }
.ta-ma-table .ta-label-cell { font-family: var(--font-ui); font-weight: 600; color: var(--text-primary); }

/* Inflection points timeline */
.ta-inflection-table {
    width: 100%; border-collapse: collapse; font-size: 0.75rem;
    margin-bottom: var(--space-md);
}
.ta-inflection-table th {
    text-align: left; font-size: 0.6rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    color: var(--text-muted); padding: 8px 12px;
    border-bottom: 2px solid var(--border);
}
.ta-inflection-table td {
    padding: 8px 12px; border-bottom: 1px solid var(--border);
    font-size: 0.75rem; color: var(--text-secondary);
}
.ta-inflection-table tr:last-child td { border-bottom: none; }
.ta-inflection-table .ta-date-cell { font-family: var(--font-data); font-weight: 500; white-space: nowrap; color: var(--text-primary); }
.ta-inflection-table .ta-price-cell { font-family: var(--font-data); font-weight: 600; }
.ta-inflection-table .ta-event-cell { font-family: var(--font-ui); color: var(--text-secondary); }

/* Volume & Volatility metrics grid */
.ta-metrics-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);
    margin-bottom: var(--space-md);
}
.ta-metric-card {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: 4px; padding: var(--space-md);
}
.ta-metric-card-title {
    font-size: 0.6rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--accent-teal); margin-bottom: var(--space-sm);
}
.ta-metric-row {
    display: flex; justify-content: space-between; align-items: baseline;
    padding: 4px 0; border-bottom: 1px solid var(--border);
}
.ta-metric-row:last-child { border-bottom: none; }
.ta-metric-name { font-size: 0.72rem; color: var(--text-secondary); }
.ta-metric-val {
    font-family: var(--font-data); font-size: 0.78rem; font-weight: 600;
    color: var(--text-primary);
}
.ta-metric-val.ta-neg { color: var(--signal-red); }
.ta-metric-val.ta-pos { color: var(--signal-green); }

/* Mean Reversion positioning bar */
.ta-mr-container {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: 4px; padding: var(--space-md); margin-bottom: var(--space-md);
}
.ta-mr-title {
    font-size: 0.6rem; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--accent-teal); margin-bottom: var(--space-sm);
}
.ta-mr-bar-track {
    height: 24px; background: var(--bg-surface); border-radius: 3px;
    position: relative; margin-bottom: var(--space-sm); overflow: visible;
}
.ta-mr-marker {
    position: absolute; top: -2px; width: 4px; height: 28px;
    background: var(--signal-red); border-radius: 2px;
    transform: translateX(-50%);
}
.ta-mr-ma50-marker, .ta-mr-ma200-marker {
    position: absolute; top: 0; width: 2px; height: 24px;
    opacity: 0.6; transform: translateX(-50%);
}
.ta-mr-ma50-marker { background: var(--signal-amber); }
.ta-mr-ma200-marker { background: var(--signal-blue); }
.ta-mr-bar-labels {
    display: flex; justify-content: space-between;
    font-family: var(--font-data); font-size: 0.6rem; color: var(--text-muted);
}
.ta-mr-legend {
    display: flex; gap: var(--space-md); margin-top: var(--space-sm); flex-wrap: wrap;
}
.ta-mr-legend-item {
    display: flex; align-items: center; gap: 4px;
    font-size: 0.6rem; color: var(--text-muted);
}
.ta-mr-legend-dot {
    width: 8px; height: 3px; border-radius: 1px;
}

/* Relative performance */
.ta-rel-table {
    width: 100%; border-collapse: collapse; font-size: 0.75rem;
}
.ta-rel-table th {
    text-align: left; font-size: 0.6rem; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.06em;
    color: var(--text-muted); padding: 8px 12px;
    border-bottom: 2px solid var(--border);
}
.ta-rel-table td {
    padding: 8px 12px; border-bottom: 1px solid var(--border);
    font-family: var(--font-data); font-size: 0.78rem;
    color: var(--text-secondary);
}
.ta-rel-table tr:last-child td { border-bottom: none; }

/* TA Crossover callout */
.ta-crossover-callout {
    background: rgba(212,85,85,0.06); border: 1px solid rgba(212,85,85,0.15);
    border-radius: 4px; padding: 10px 14px; margin-bottom: var(--space-md);
    display: flex; gap: var(--space-sm); align-items: baseline;
}
.ta-crossover-label {
    font-family: var(--font-data); font-size: 0.65rem; font-weight: 700;
    color: var(--signal-red); white-space: nowrap;
}
.ta-crossover-text { font-size: 0.72rem; color: var(--text-secondary); }

/* --- Responsive --- */
@media (max-width: 1024px) {
    .rh-main { flex-direction: column; align-items: flex-start; }
    .rh-right { text-align: left; }
    .rh-metrics { justify-content: flex-start; }
    .verdict-inner { flex-direction: column; }
    .verdict-scores { justify-content: flex-start; }
    .tw-conditions { grid-template-columns: 1fr; }
    .ta-metrics-grid { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
    .rh-ticker { font-size: 1.6rem; }
    .rh-price { font-size: 1.4rem; }
}
