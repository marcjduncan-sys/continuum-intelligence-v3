  name: Narrative Framework Analysis

  on:
    schedule:
      - cron: '0 7 * * *'
      - cron: '0 19 * * *'
    workflow_dispatch:
      inputs:
        tickers:
          description: 'Tickers to analyze (or all)'
          required: true
          default: 'all'
        severity_threshold:
          description: 'Minimum severity (NORMAL/MODERATE/HIGH/CRITICAL)'
          required: true
          default: 'MODERATE'

  jobs:
    analyze:
      runs-on: ubuntu-latest
      permissions:
        contents: write
        issues: write

      steps:
        - name: Checkout repository
          uses: actions/checkout@v4

        - name: Setup Node.js
          uses: actions/setup-node@v4
          with:
            node-version: '20'

        - name: Run narrative analysis
          run: node scripts/run-automated-analysis.js
